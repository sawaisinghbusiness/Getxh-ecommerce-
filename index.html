<!DOCTYPE html>
<html class="light" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>GETXH - Login</title>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

<style>
.material-symbols-outlined { font-variation-settings: 'FILL' 0,'wght' 400,'GRAD' 0,'opsz' 20; font-size: 20px; }
.form-input-container { position: relative; }
.form-input-container .material-symbols-outlined { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #D1D5DB; pointer-events:none; }
.form-input-container .form-input { padding-left: 3rem; }
.toggle-password { position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); color:#D1D5DB; cursor:pointer; }
.toggle-password:hover { color:#111827; }
</style>

<!-- ⭐ Firebase SDK -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyClO8clBVgSHKx8jarNwC38oMtWRK0W8KE",
      authDomain: "getxh-42588.firebaseapp.com",
      projectId: "getxh-42588",
      storageBucket: "getxh-42588.firebasestorage.app",
      messagingSenderId: "170770122888",
      appId: "1:170770122888:web:7adcf91077d5695b06b73d"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();

    // Login button handler
    window.loginNow = function () {
        let email = document.getElementById("email").value.trim();
        let password = document.getElementById("password").value.trim();
        let errorBox = document.getElementById("errorBox");

        if (!email) {
            errorBox.textContent = "Email cannot be empty";
            errorBox.classList.remove("hidden");
            return;
        }

        if (!password) {
            errorBox.textContent = "Password cannot be empty";
            errorBox.classList.remove("hidden");
            return;
        }

        signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {

            const user = userCredential.user;

            // ⭐ Save logged-in user name
            localStorage.setItem("getxh_user_name", user.displayName || "");

            localStorage.setItem("getxh_user_logged_in", "yes");
            localStorage.setItem("getxh_current_user", email);

            window.location.href = "Dashboard.html";
        })
        .catch((error) => {
            let msg = "Invalid email or password";
            if (error.code === "auth/user-not-found") msg = "No account exists with this email";
            if (error.code === "auth/wrong-password") msg = "Incorrect password";
            if (error.code === "auth/invalid-email") msg = "Enter a valid email";

            errorBox.textContent = msg;
            errorBox.classList.remove("hidden");
        });
    };
</script>

</head>

<body class="font-display">

<div class="relative flex min-h-screen w-full flex-col items-center justify-center bg-white overflow-x-hidden">

<div class="px-4 flex flex-1 justify-center items-center py-10">
<div class="w-full max-w-md flex-col items-center">

<div class="flex flex-col items-center mb-8">
<h2 class="text-3xl font-bold tracking-tighter text-[#111827]">GETXH</h2>
<div class="mt-1 h-0.5 w-12 bg-[#0052FF]"></div>
</div>

<div class="w-full rounded-lg bg-white p-8 shadow-[0_4px_24px_rgba(209,213,219,0.3)]">

<h1 class="text-[#111827] text-3xl font-bold text-center pb-8">Welcome Back</h1>

<div id="errorBox" class="hidden mb-4 text-red-600 font-medium text-center"></div>

<div class="flex flex-col gap-4">

<div class="flex flex-col">
<label class="text-[#111827] text-sm font-medium mb-2">Email</label>
<div class="form-input-container">
<input id="email" type="email" class="form-input w-full rounded-lg border border-[#D1D5DB] h-12 px-4" placeholder="you@example.com"/>
<span class="material-symbols-outlined">mail</span>
</div>
</div>

<div class="flex flex-col">
<label class="text-[#111827] text-sm font-medium mb-2">Password</label>
<div class="form-input-container">
<input id="password" type="password" class="form-input w-full rounded-lg border border-[#D1D5DB] h-12 px-4" placeholder="Enter your password"/>
<span class="material-symbols-outlined">lock</span>
<div class="toggle-password" onclick="togglePassword()">
<span class="material-symbols-outlined">visibility</span>
</div>
</div>
</div>

</div>

<div class="mt-6 flex flex-col gap-4">
<button onclick="loginNow()" class="w-full h-12 bg-[#0052FF] text-white rounded-lg font-semibold hover:bg-[#0045d6]">
    Sign In
</button>
</div>

<div class="flex justify-between items-center mt-6">
<a class="text-sm font-medium text-[#0052FF]" href="#">Forgot Password?</a>

<a class="text-sm font-medium text-[#111827]" href="Registerpage.html">
Don't have an account? <span class="text-[#0052FF] font-semibold">Register</span>
</a>
</div>

</div>
</div>
</div>

</div>

<script>
function togglePassword() {
    let p = document.getElementById("password");
    p.type = p.type === "password" ? "text" : "password";
}
</script>

</body>
</html>
